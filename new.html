<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kernelcut</title>
  <meta name="description" content="Kernelcut — Daily Tech Digest. Simple, readable, with long-form summaries and a 06:00 UTC newsletter." />
  <style>
    /* Minimal, print-friendly palette matching the super-simple look */
    :root {
      --bg: #ffffff;
      --fg: #111111;
      --muted: #555555;
      --rule: #e6e6e6;
      --maxw: 780px;
      --radius: 10px;
    }
    * { box-sizing: border-box; }
    html, body { background: var(--bg); color: var(--fg); margin: 0; padding: 0; }
    body { font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    a { color: inherit; text-decoration: underline; text-underline-offset: 2px; }
    header { max-width: var(--maxw); margin: 28px auto 12px; padding: 0 16px; }
    h1 { margin: 0 0 2px; font-size: 24px; font-weight: 800; letter-spacing: .2px; }
    .sub { margin: 0; color: var(--muted); font-size: 14px; }
    .wrap { max-width: var(--maxw); margin: 0 auto; padding: 0 16px 48px; }
    hr { border: 0; border-top: 1px solid var(--rule); margin: 20px 0; }

    /* Newsletter */
    .newsletter { border: 0; border-radius: 0; padding: 0; display: grid; gap: 6px; max-width: var(--maxw); margin: 0 0 6px 0; }
    .newsletter h2 { margin: 0; font-size: 0; line-height: 0; height: 0; overflow: hidden; }
    .newsletter p { margin: 0; color: var(--muted); font-size: 13px; }
    .nl-row { display: inline-flex; gap: 8px; align-items: center; }
    input[type="email"] { width: 320px; max-width: 52vw; height: 36px; padding: 6px 10px; border: 1px solid var(--rule); border-radius: 6px; background: #fff; color: var(--fg); font-size: 14px; }
    button { height: 36px; padding: 0 12px; border: 1px solid var(--rule); border-radius: 6px; background: #fff; color: var(--fg); cursor: pointer; font-weight: 600; line-height: 36px; } button:hover { background:#f5f5f5; }
    button:disabled { opacity: .6; cursor: not-allowed; }
    .muted { color: var(--muted); font-size: 13px; }

    /* Sections */
    .section { margin: 26px 0 8px; }
    .section h3 { margin: 0; font-size: 17px; }

    /* Items */
    .item { padding: 14px 0; border-bottom: 1px solid var(--rule); }
    .meta { margin-bottom: 6px; color: var(--muted); font-size: 13px; }
    .title { margin: 0 0 8px; font-size: 16px; font-weight: 700; line-height: 1.35; }
    .summary { margin: 0; }
    .tags { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 6px; }
    .tag { font-size: 12px; color: var(--muted); border: 1px dashed var(--rule); padding: 2px 6px; border-radius: 999px; }

    @media (max-width: 520px) { .nl-row { flex-direction: column; align-items: stretch; } button { width: 100%; } }
    }
  .sr-only { position: absolute !important; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,1px,1px); white-space: nowrap; border: 0; }
  </style>
</head>
<body>
  <header>
    <h1>Kernelcut</h1>
    
  </header>

  <div class="wrap">
    <!-- Newsletter (06:00 UTC fixed delivery) -->
    <section class="newsletter" aria-labelledby="nl-title">
      <h2 id="nl-title">Morning briefing</h2>
      <p class="lead">06:00 UTC — one concise email per day.</p>
      <form id="nl-form" class="nl-row" novalidate>
        <label class="sr-only" for="nl-email">Email</label>
        <input id="nl-email" name="email" type="email" placeholder="you@domain.com" required />
        <button id="nl-btn" type="submit">Subscribe</button>
      </form>
      <div id="nl-msg" class="muted" role="status"></div>
    </section>

    <hr />

    <div id="sections"></div>
  </div>

  <script>
    // Minimal feed (replace with fetch('/api/feed') in production)
    const data = {
      categories: [
        { id: 'bigtech', name: 'Tech Titans & Upstarts', emoji: '🚀' },
        { id: 'nextfrontiers', name: 'Next Frontiers (Science & Futurism)', emoji: '🔬' },
        { id: 'code', name: 'Code & Systems', emoji: '💻' },
        { id: 'design', name: 'Design & Creativity', emoji: '🎨' },
        { id: 'ai_data', name: 'AI & Data Realities', emoji: '📊' },
        { id: 'policy', name: 'Digital Policy & Society', emoji: '🌍' },
        { id: 'fintech', name: 'Fintech & Crypto', emoji: '💸' },
        { id: 'consumer', name: 'Consumer Tech & Gadgets', emoji: '📱' },
        { id: 'space', name: 'Space & Exploration', emoji: '🛰️' }
      ],
      items: [
        {
          id: 'n1',
          title: 'Open-source LLM tuned for efficient inference hits production scale',
          url: 'https://example.com/open-llm-efficient-inference',
          category_id: 'ai_data',
          region: 'Global', source: 'Example News', author: 'Jane Doe',
          published_at: '2025-09-01T07:40:00Z',
          summary_long: `The new model focuses on lean inference and predictable latency under real-world loads. \n\nIt introduces a pragmatic recipe: smaller context windows for common paths, dynamic routing to heavier experts only when complexity demands it, and guardrailed tool-use to reduce hallucination surfaces. In practice this yields lower p95 latency, fewer cold starts, and a measurable drop in nonsensical outputs. \n\nThe team open-sourced weights and eval harnesses, inviting independent replication. Early adopters report double-digit reductions in cloud bills without sacrificing output quality for day‑to‑day tasks like summarisation, structured extraction, and retrieval-augmented answers. \n\nRegulators and enterprise buyers will scrutinise the safety posture. The release ships with transparent evaluation cards, red‑team prompts, and a changelog documenting mitigations. The bigger picture: efficient, auditable models make it easier for startups and universities to compete with closed incumbents while keeping experimentation fast and affordable.`,
          tags: ['AI', 'Inference', 'Reliability']
        },
        {
          id: 'n2',
          title: 'Warehouse robotics startup raises €75M to scale EU operations',
          url: 'https://example.com/warehouse-robots',
          category_id: 'bigtech',
          region: 'EU', source: 'LogiTech Daily', author: 'Carlos Silva',
          published_at: '2025-09-01T06:10:00Z',
          summary_long: `The Series B will fund deployment into high‑throughput distribution hubs ahead of the holiday peak. \n\nThe company’s platform combines robust computer vision with aisle‑safe navigation, allowing bots to operate in tighter spaces and around human pickers without slowing the line. Pilots showed fewer picking errors and higher cycle times, with ROI windows ranging from nine to fourteen months depending on SKU mix and seasonality. \n\nFor retailers, the attraction isn’t novelty—it’s resilience: the system reduces labour bottlenecks during spikes and provides traceable movement logs that simplify loss investigations. \n\nThe immediate challenges are boring and critical: service networks, spare parts logistics, and training. Competitors will pressure margins, but the unit economics are improving as fleets grow and charging becomes smarter.`,
          tags: ['Robotics', 'Logistics', 'VC']
        },
        {
          id: 'n3',
          title: 'Rust adoption deepens across safety-critical systems',
          url: 'https://example.com/rust-systems',
          category_id: 'code',
          region: 'Global', source: 'Systems Weekly', author: 'Mei Lin',
          published_at: '2025-08-31T18:00:00Z',
          summary_long: `A wave of audits and hardened toolchains is pushing Rust further into kernels, databases, and low‑latency services. \n\nTeams cite memory safety and performance as the primary drivers, though they still contend with a steeper learning curve and younger libraries in niche areas. Recent case studies show that once teams cross the learning hump, defect rates related to memory errors fall sharply, and runtime performance remains competitive with C/C++. \n\nOrganisations are building internal playbooks: how to stage migrations, when to isolate legacy modules behind FFI, and where to standardise on async runtimes. The near‑term friction—hiring and training—pays off when incidents trend downward and on‑call pages quieten. \n\nExpect more tooling around observability, formal verification, and embedded targets to make Rust the safe default for greenfield systems work.`,
          tags: ['Rust', 'Systems', 'Performance']
        }
      ]
    };

    // Render
    const $sections = document.getElementById('sections');
    const itemsByCat = data.items.reduce((acc, it) => { (acc[it.category_id] ||= []).push(it); return acc; }, {});
    const dateFmt = ts => new Date(ts).toLocaleString('en-GB', { hour12: false });

    for (const cat of data.categories) {
      const items = itemsByCat[cat.id];
      if (!items || !items.length) continue;

      const sec = document.createElement('section');
      sec.className = 'section';
      sec.innerHTML = `<h3>${cat.emoji} ${cat.name}</h3>`;
      $sections.appendChild(sec);

      items.sort((a,b)=> new Date(b.published_at)-new Date(a.published_at))
        .forEach(n => {
          const art = document.createElement('article');
          art.className = 'item';
          art.innerHTML = `
            <div class="meta">${cat.emoji} ${cat.name} • ${n.source}${n.author ? ' — ' + n.author : ''} • ${dateFmt(n.published_at)} • ${n.region || 'Global'}</div>
            <h4 class="title"><a href="${n.url}" target="_blank" rel="noopener noreferrer">${n.title}</a></h4>
            <p class="summary">${n.summary_long.replace(/\n\n/g, '<br><br>')}</p>
            ${n.tags?.length ? `<div class="tags">${n.tags.map(t => `<span class=tag>#${t}</span>`).join('')}</div>` : ''}
          `;
          $sections.appendChild(art);
        });
    }

    // Newsletter handler
    const nlForm = document.getElementById('nl-form');
    const nlEmail = document.getElementById('nl-email');
    const nlBtn = document.getElementById('nl-btn');
    const nlMsg = document.getElementById('nl-msg');

    nlForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      nlMsg.textContent = '';
      const email = nlEmail.value.trim();
      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { nlMsg.textContent = 'Enter a valid email.'; return; }
      nlBtn.disabled = true;
      try {
        const res = await fetch('/api/newsletter', {
          method: 'POST', headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, frequency: 'daily', send_time_utc: '06:00', categories_opt_in: data.categories.map(c => c.id) })
        });
        if (!res.ok) throw new Error('Network');
        nlMsg.textContent = 'Subscribed to the 06:00 UTC briefing. Please confirm via email.';
        nlForm.reset();
      } catch (err) {
        nlMsg.textContent = 'We could not subscribe you right now. Please try again.';
      } finally { nlBtn.disabled = false; }
    });
  </script>
</body>
</html>
